<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hospital - Doctor Appointment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      margin: 0;
      padding: 20px;
      color: #d4cdcd;
    }
    h2, h3 {
      text-align: center;
      color: #ffffff;
    }
    .card-container {
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    .card {
      width: 140px;
      background: #2e2e3d;
      border: 1px solid #444;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      cursor: grab;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-3px);
    }
    .card img {
      width: 100%;
      height: 100px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 8px;
    }
    #dropZone {
      display: none;
      margin-top: 30px;
      padding: 20px;
      min-height: 150px;
      border: 2px dashed #888;
      border-radius: 10px;
      background: #2b2b3c;
      text-align: center;
      transition: background-color 0.3s;
    }
    #dropZone.filled {
      background-color: white;
      color: black;
    }
    #dropZone.filled h4,
    #dropZone.filled p {
      color: black;
    }
    #bookingForm {
      display: none;
      margin-top: 20px;
      background: #2c2c3a;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
    }
    #bookingForm input,
    #bookingForm button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #666;
      border-radius: 6px;
      background-color: #1e1e2f;
      color: #f0f0f0;
    }
    #bookingForm button {
      background-color: #3498db;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    #bookingForm button:hover {
      background-color: #2980b9;
    }
    #message {
      margin-top: 10px;
      text-align: center;
      font-weight: bold;
      color: #ffcc00;
    }
    #loginScreen {
      max-width: 400px;
      margin: 80px auto;
      background: #2c2c3a;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    #loginScreen input {
      width: 90%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      border: 1px solid #666;
      background-color: #1e1e2f;
      color: #fff;
    }
    #loginScreen button {
      margin-top: 15px;
      padding: 10px 20px;
      border: none;
      background-color: #27ae60;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    #loginScreen button:hover {
      background-color: #1e8449;
    }
    #logoutBtn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 15px;
      display: none;
    }
    #logoutBtn:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>

  <div id="loginScreen">
    <h2>üîê Login to Book an Appointment</h2>
    <input type="email" id="userEmail" placeholder="Enter your email" />
    <button onclick="login()">Login</button>
  </div>

  <div id="mainContent" style="display: none;">
    <h2>üè• Welcome to MedCare Hospital</h2>
    <h3>üë®‚Äç‚öïÔ∏è Drag a Doctor Card Below to See Full Details</h3>

    <div style="text-align: center;">
      <button id="logoutBtn" onclick="logout()">üîì Logout</button>
    </div>

    <div class="card-container" id="cardContainer">
      <!-- Doctor Cards -->
      <div class="card" draggable="true" data-id="1">
        <img src="1.jpg" alt="Dr. Ayesha Khan" />
        <h4>Dr. Ayesha Khan</h4>
        <p>Cardiologist</p>
      </div>
      <div class="card" draggable="true" data-id="2">
        <img src="2.jpg" alt="Dr. Ali Raza" />
        <h4>Dr. Ali Raza</h4>
        <p>Orthopedic</p>
      </div>
      <div class="card" draggable="true" data-id="4">
        <img src="5.jpg" alt="Dr. Ahmed Farooq" />
        <h4>Dr. Ahmed Farooq</h4>
        <p>Neurologist</p>
      </div>
      <div class="card" draggable="true" data-id="5">
        <img src="4.jpg" alt="Dr. Rabia Saleem" />
        <h4>Dr. Rabia Saleem</h4>
        <p>Dermatologist</p>
      </div>
      <div class="card" draggable="true" data-id="6">
        <img src="6.jpg" alt="Dr. Usman Tariq" />
        <h4>Dr. Usman Tariq</h4>
        <p>General Physician</p>
      </div>
      <div class="card" draggable="true" data-id="7">
        <img src="7.jpg" alt="Dr. Hina Zafar" />
        <h4>Dr. Hina Zafar</h4>
        <p>Dentist</p>
      </div>
    </div>

    <div id="dropZone">
      <p>Drop a doctor card here to view details üëá</p>
    </div>

    <div id="bookingForm">
      <h3>Book an Appointment</h3>
      <input type="text" id="patientName" placeholder="Your Name">
      <input type="date" id="appointmentDate">
      <input type="time" id="appointmentTime">
      <button onclick="bookAppointment()">Book Now</button>
      <div id="message"></div>
    </div>
  </div>

  <script>
    const doctorData = {
      1: { name: "Dr. Ayesha Khan", specialty: "Cardiologist", education: "MBBS, FCPS (Cardiology)", days: [1,2,3], time: [10,14] },
      2: { name: "Dr. Ali Raza", specialty: "Orthopedic", education: "MBBS, MS (Ortho)", days: [2,4], time: [13,17] },
      4: { name: "Dr. Ahmed Farooq", specialty: "Neurologist", education: "MBBS, FCPS (Neuro)", days: [3,4,5], time: [14,18] },
      5: { name: "Dr. Rabia Saleem", specialty: "Dermatologist", education: "MBBS, MCPS (Dermatology)", days: [1,2,3,4], time: [10,16] },
      6: { name: "Dr. Usman Tariq", specialty: "General Physician", education: "MBBS", days: [2,3,4,5,6], time: [11,15] },
      7: { name: "Dr. Hina Zafar", specialty: "Dentist", education: "BDS, MDS", days: [1,2,3,4,5], time: [9,12] }
    };

    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    let selectedDoctor = null;
    let loggedInEmail = "";

    function formatAMPM(hour) {
      const suffix = hour >= 12 ? "PM" : "AM";
      const formattedHour = hour % 12 || 12;
      return `${formattedHour} ${suffix}`;
    }

    function login() {
      const email = document.getElementById("userEmail").value;
      if (email.includes("@")) {
        loggedInEmail = email;
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
        document.getElementById("cardContainer").style.display = "flex";
        document.getElementById("dropZone").style.display = "block";
        document.getElementById("logoutBtn").style.display = "inline-block";
      } else {
        alert("Please enter a valid email.");
      }
    }

    function logout() {
      loggedInEmail = "";
      selectedDoctor = null;
      document.getElementById("userEmail").value = "";
      document.getElementById("loginScreen").style.display = "block";
      document.getElementById("mainContent").style.display = "none";
      document.getElementById("dropZone").classList.remove("filled");
      document.getElementById("dropZone").innerHTML = `<p>Drop a doctor card here to view details üëá</p>`;
      document.getElementById("bookingForm").style.display = "none";
      document.getElementById("logoutBtn").style.display = "none";
      document.getElementById("message").innerText = "";
    }

    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", card.dataset.id);
      });
    });

    const dropZone = document.getElementById("dropZone");
    const form = document.getElementById("bookingForm");
    const message = document.getElementById("message");

    dropZone.addEventListener("dragover", e => {
      e.preventDefault();
      dropZone.style.backgroundColor = "#d8ecf9";
    });

    dropZone.addEventListener("dragleave", () => {
      dropZone.style.backgroundColor = "#2b2b3c";
    });

    dropZone.addEventListener("drop", e => {
      e.preventDefault();
      const id = e.dataTransfer.getData("text/plain");
      const doc = doctorData[id];
      if (doc) {
        selectedDoctor = doc;
        dropZone.classList.add("filled");
        dropZone.innerHTML = `
          <h4>${doc.name}</h4>
          <p><strong>Specialty:</strong> ${doc.specialty}</p>
          <p><strong>Education:</strong> ${doc.education}</p>
          <p><strong>Available Days:</strong> ${doc.days.map(d => dayNames[d]).join(', ')}</p>
          <p><strong>Timings:</strong> ${formatAMPM(doc.time[0])} - ${formatAMPM(doc.time[1])}</p>
          <p><strong>Patient Email:</strong> ${loggedInEmail}</p>
        `;
        form.style.display = "block";
        message.innerText = "";
        dropZone.style.backgroundColor = "white";
      }
    });

    function bookAppointment() {
      const name = document.getElementById("patientName").value;
      const dateInput = document.getElementById("appointmentDate").value;
      const timeInput = document.getElementById("appointmentTime").value;

      if (!selectedDoctor || !name || !dateInput || !timeInput) {
        message.innerText = "‚ùå Please fill all fields correctly.";
        return;
      }

      const date = new Date(dateInput);
      const [hourStr, minStr] = timeInput.split(":");
      const hour = parseInt(hourStr);
      const totalMinutes = hour * 60 + parseInt(minStr);

      const day = date.getDay();
      const [startHour, endHour] = selectedDoctor.time;
      const startMinutes = startHour * 60;
      const endMinutes = endHour * 60;

      if (!selectedDoctor.days.includes(day)) {
        message.innerText = `‚ùå ${selectedDoctor.name} is not available on ${dayNames[day]}.`;
        return;
      }

      if (totalMinutes < startMinutes || totalMinutes >= endMinutes) {
        message.innerText = `‚ùå ${selectedDoctor.name} is not available at ${formatAMPM(hour)}.`;
        return;
      }

      message.innerText = `‚úÖ Appointment booked with ${selectedDoctor.name} on ${date.toDateString()} at ${formatAMPM(hour)}.`;

      setTimeout(() => {
        message.innerText = "";
        form.reset();
      }, 5000);
    }
  </script>
</body>
</html>
